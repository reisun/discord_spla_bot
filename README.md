# discord_spla_bot

## 概要
スプラ人狼でGMを支援する便利コマンドを提供します。

## 使い方

以下のコマンドが使えます 

#### メンバーの決定
    /spjメンバー @一人目のメンバーのメンション @二人目のメンション @三人… @…

#### メンバーの追加・削除
    /spjメンバー @メンバーのメンション
既にいる場合は削除、いない場合は追加します。

#### メンバー確認
    /spjメンバー

#### メンバーの名前・役割の提案  
    /spjロール提案 名前 村人以外の役職１ 村人以外の役職２ ...
名前・役割を割り振ってコマンドを打った人にDMします。各メンバーにはまだDMしません

#### 送信コマンド例 その１
    /spjロール提案 △△△ 狂人 人狼 

#### 送信コマンド例 その２  
    /spjロール提案 ◆◆◆ 占い師 ハンター 人狼 人狼
役職は好きに追加OKです。同じ役職が２人必要なら「人狼 人狼」のように２個書いてください。

#### 提案として返信されるメッセージ例
    /spjロール送信  
    ABCDFE-G1234-56ABCDE
    △△△A 村人 メンバー１  
    △△△B 狂人 メンバー２ 
    △△△C 村人 メンバー３
    狂人=>知らせる=>人狼
/spjロール提案 を行うと、上記の割り振りコマンドを返信します。  
こちらをコピペしてBOTに送信すると、各メンバーにDMが送信されます。  
割り当てが気に入らない場合は、役職などを手で変更してから  
コマンド送信できます。

#### 各メンバーに名前・役割をDM送信  
    /spjロール送信  
    ABCDFE-G1234-56ABCDE
    △△△A 村人 メンバー１  
    △△△B 狂人 メンバー２ 
    △△△C 村人 メンバー３
    狂人=>知らせる=>人狼

/spjロール提案で返信されたコマンドをBOTに送ることで  
各メンバーへ名前・役割をDMできます。  
コマンドとなっているため、内容を修正して送信することで  
名前や役職を変えたりすることができます。

#### 投票用のメッセージを表示する。  
    /spj投票
これはDMからでは無く、みんなが見れるスレッド上でやってください。

#### 情報をクリアする
    /spjクリア 
自身の情報がクリアされます。メンバーなどの登録情報もクリアされます。  
メンバー情報などリセットをしたい時に使います。

## 今後考えている機能
### メンバーの名前・役割の提案（テンプレを使用）
    /spjロール提案
パラメータを書かずにコマンドだけ呼び出すと、別コマンドで設定できるテンプレート（後述）が使えるお手軽な機能です。  

### ロール提案のテンプレートを保存する
    /spjロールテンプレート 名前 村人以外の役職１ 村人以外の役職２ ...
/spjロール提案 で利用するテンプレートを自身の設定に保存できます。

## 開発環境構築

### dockerの起動
    docker-compose up -d --build

### dockerコンテナに入る
    docker exec -it {コンテナ名} bash

### node_modulesのインストール
    cd /home/SPLABOT
    npm i

### typescriptのビルド
    npm run compile

### botの起動
    npm run start

