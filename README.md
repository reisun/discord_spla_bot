# discord_spla_bot

## 概要
スプラ人狼でGMを支援する便利コマンドを提供します。

## 使い方

以下のコマンドが使えます 

#### メンバーの追加・削除
    /spjメンバー @一人目のメンバーのメンション @二人目のメンション @三人… @…
既にメンバーにいる場合は削除、いない場合は追加します。

#### メンバー確認
    /spjメンバー

#### メンバーの名前・役割の割り当て作成  
    /spjロール 名前 村人以外の役職(複数指定可)
名前・役割の割り当てを自動で作成してコマンドを打った人にDMします。  
各メンバーにはまだDMされません。

#### 送信コマンド例 その１
    /spjロール あきと 狂人 人狼 

#### 送信コマンド例 その２  
    /spjロール あきと 占い師 ハンター 人狼 人狼
役職は好きに追加OKです。同じ役職が２人必要なら「人狼 人狼」のように２個書いてください。

#### 各メンバーに名前・役割をDM送信
    /spjロール送信  
    ABCDFE-G1234-56ABCDE
    あきとA 村人 メンバー１  
    あきとB 狂人 メンバー２ 
    あきとC 村人 メンバー３
    狂人=>知らせる=>人狼
`/spjロール` を行うと、上記の役割DMコマンドを返信します。  
こちらをコピペしてBOTに送信すると、各メンバーにDMが送信されます。  
割り当てが気に入らない場合は、役職などを手で変更してから  
コマンド送信できます。  
※サーバーのチャンネル上で送信すると丸見えですので  
BOTに直接DMで送ってください。

#### 投票用のメッセージを表示する。  
    /spj投票
こちらはDMからでは無く、みんなが見れるチャンネル上でやってください。

#### 情報をクリアする
    /spjクリア   
コマンド実行者ごとに保存されている、メンバーの登録情報がクリアされます。  
今後、機能追加で保存する情報が増えた場合、そちらも削除されます。

### 今後考えている機能
#### メンバーの名前・役割の作成（テンプレを使用）
    /spjロール
`/spjロール` を他パラメータを書かずにコマンドだけ呼び出すと、あらかじめ設定された名前・役割で割り当てが作成できるお手軽機能です。  

#### ロール作成のテンプレートを保存する
    /spjロールテンプレート 名前 村人以外の役職(複数指定可)
`/spjロール` で利用するテンプレートを自身の設定に保存できます。

#### ロール作成のテンプレートを削除する
    /spjロールテンプレート /d
自身の設定に保存されたテンプレートを削除します。

#### ロール作成のテンプレートを変更する（グローバル）
    /spjロールテンプレート /g 名前 村人以外の役職(複数指定可)
自身のテンプレート設定が無い時に使われるグローバル設定を変更できます。


## 開発環境構築

### dockerの起動
    docker-compose up -d --build

### dockerコンテナに入る
    docker exec -it {コンテナ名} bash

### node_modulesのインストール
    cd /home/SPLABOT
    npm i

### typescriptのビルド
    npm run compile

### botの起動
    npm run start

